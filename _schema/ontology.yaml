# Mibera Codex Ontology
# Formal data model documenting entity types, relationships, and cardinality.
# Sits above individual JSON schemas to capture the relational structure.
#
# Version: 1.0.0
# Generated: Cycle 004 — Discovery & Browse

entities:
  mibera:
    description: "A time-travelling Rebased Retard Bera"
    count: 10000
    schema: "_schema/mibera.schema.json"
    directory: "miberas/"
    file_pattern: "{id}.md"
    frontmatter: true
    id_type: integer
    id_range: [1, 10000]

  archetype:
    description: "One of four cultural identities that define a Mibera's worldview"
    count: 4
    values: [Freetekno, Milady, Acidhouse, "Chicago/Detroit"]
    directory: null
    file: "core-lore/archetypes.md"
    frontmatter: false

  ancestor:
    description: "Cultural lineage spanning ancient and modern civilizations"
    count: 33
    schema: "_schema/ancestor.schema.json"
    directory: "core-lore/ancestors/"
    file_pattern: "{slug}.md"
    frontmatter: true
    values:
      - Aboriginal
      - Arabs
      - Ballroom
      - Bong Bear
      - Buddhist
      - Chinese
      - Cypherpunk
      - Ethiopian
      - Gabon
      - Greek
      - Haitian
      - Hindu
      - Indian
      - Irish Druids
      - Japanese
      - Mayan
      - Mongolian
      - Native American
      - Nepal
      - Orthodox Jew
      - Palestinian
      - Polynesian
      - Punjabi
      - Pythia
      - Rastafarians
      - Sami
      - Satanist
      - Sicanje
      - Stonewall
      - Sufis
      - Thai
      - Traveller
      - Turkey

  drug:
    description: "A molecule that shapes Mibera consciousness and maps to a tarot card"
    count: 78
    schema: "_schema/drug.schema.json"
    directory: "drugs-detailed/"
    file_pattern: "{slug}.md"
    frontmatter: true

  tarot_card:
    description: "Divination archetype paired 1:1 with a drug"
    count: 78
    schema: "_schema/tarot-card.schema.json"
    directory: "core-lore/tarot-cards/"
    file_pattern: "{slug}.md"
    frontmatter: true

  element:
    description: "Classical element assigned to each Mibera"
    count: 4
    values: [Earth, Fire, Water, Air]
    directory: null

  era:
    description: "Temporal epoch of a Mibera's birth"
    count: 2
    values: [Ancient, Modern]
    directory: null

  birthday_era:
    description: "Historical period containing Mibera birth dates"
    count: 10
    directory: "birthdays/"
    file_pattern: "{slug}.md"
    values:
      - Prehistoric
      - Ancient BCE
      - Classical BCE
      - Late Antiquity
      - Early Medieval
      - Medieval
      - Early Modern
      - 19th Century
      - 20th Century
      - 21st Century

  zodiac_sign:
    description: "Astrological sun sign"
    count: 12
    values: [Aries, Taurus, Gemini, Cancer, Leo, Virgo, Libra, Scorpio, Sagittarius, Capricorn, Aquarius, Pisces]
    directory: null

  swag_rank:
    description: "Quality tier based on swag_score"
    count: 8
    values: [Sss, Ss, S, A, B, C, D, F]
    directory: null

  trait:
    description: "Visual characteristic of a Mibera (clothing, accessories, body features)"
    count: 1257
    schema:
      - "_schema/trait-full.schema.json"
      - "_schema/trait-minimal.schema.json"
    directory: "traits/"
    subcategories:
      - accessories
      - backgrounds
      - body
      - character
      - clothing
      - items
      - overlays
    frontmatter: true

  special_collection:
    description: "Partner or special event collection"
    count: 32
    schema: "_schema/special-collection.schema.json"
    directory: "special-collections/"
    frontmatter: true

relationships:
  - type: has_archetype
    source: mibera
    target: archetype
    cardinality: many-to-one
    source_field: archetype
    signal_tier: load_bearing
    description: "Each Mibera belongs to exactly one archetype"

  - type: has_ancestor
    source: mibera
    target: ancestor
    cardinality: many-to-one
    source_field: ancestor
    signal_tier: load_bearing
    description: "Each Mibera has exactly one ancestor culture"

  - type: born_in_era
    source: mibera
    target: era
    cardinality: many-to-one
    source_field: time_period
    signal_tier: load_bearing
    description: "Each Mibera is born in Ancient or Modern era"

  - type: has_drug
    source: mibera
    target: drug
    cardinality: many-to-one
    source_field: drug
    signal_tier: textural
    description: "Each Mibera is associated with exactly one drug"

  - type: maps_to_tarot
    source: drug
    target: tarot_card
    cardinality: one-to-one
    source_field: null
    signal_tier: textural
    description: "Each drug maps to exactly one tarot card (and vice versa)"

  - type: has_element
    source: mibera
    target: element
    cardinality: many-to-one
    source_field: element
    signal_tier: textural
    description: "Each Mibera is aligned with one classical element"

  - type: has_suit_element
    source: tarot_card
    target: element
    cardinality: many-to-one
    source_field: element
    description: "Each tarot card belongs to a suit aligned with an element"

  - type: has_sun_sign
    source: mibera
    target: zodiac_sign
    cardinality: many-to-one
    source_field: sun_sign
    signal_tier: modifier
    description: "Each Mibera has a sun sign"

  - type: has_swag_rank
    source: mibera
    target: swag_rank
    cardinality: many-to-one
    source_field: swag_rank
    signal_tier: modifier
    description: "Each Mibera has a swag rank derived from swag_score"

  - type: drug_archetype
    source: drug
    target: archetype
    cardinality: many-to-one
    source_field: archetype
    description: "Each drug is associated with one archetype"

  - type: drug_ancestor
    source: drug
    target: ancestor
    cardinality: many-to-one
    source_field: ancestor
    description: "Each drug is associated with one ancestor culture"

signal_hierarchy:
  description: "From IDENTITY.md — the weight each dimension carries in defining a Mibera"
  tiers:
    load_bearing:
      description: "Define worldview — these are the most important identity signals"
      dimensions: [archetype, ancestor, era]
      order: [archetype, ancestor, birthday_era]
    textural:
      description: "Color expression — add depth and nuance"
      dimensions: [drug, tarot_card, element]
      order: [drug, tarot_card, element]
    modifiers:
      description: "Modify and refine — secondary characteristics"
      dimensions: [swag_rank, zodiac_sign]
      order: [swag_rank, sun_sign, moon_sign, ascending_sign]
